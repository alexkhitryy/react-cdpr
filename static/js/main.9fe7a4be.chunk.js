(this["webpackJsonpreact-cdpr"]=this["webpackJsonpreact-cdpr"]||[]).push([[0],{65:function(e,t,n){},66:function(e,t,n){},67:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(18),i=n.n(r),s=n(2),l=n(5),o=n(8),u=n(9),d=n.n(u),j=n(13),b=n(14),O=n.n(b),m="http://yhrtwesdfd.cdprojektred.com:3000/api",h=function(){return"".concat(m,"/Products")},p=function(e){return"".concat(m,"/Products/count?where=").concat(e)},f="ADD_PRODUCT",x="CHECK_PRODUCTS",v="DELETE_PRODUCT",y="GET_PRODUCTS_LIST",g="SELECT_PRODUCT",C="RESET_SELECTED",N=function(){return function(){var e=Object(j.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.a.get(h());case 2:n=e.sent,t({type:y,all:n.data});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},k=function(e){return{id:e,type:g}},E=function(){return{type:C}},S=function(e){return e.products},w=n(1),D=function(e){e.modalOpen;var t=e.setModalOpen,n=Object(o.b)(),a=Object(o.c)(S).selected;return Object(w.jsx)("div",{className:"modal-shadow",onClick:function(e){e.target.classList.contains("modal-shadow")&&t(!1)},children:Object(w.jsxs)("div",{className:"confirmation-modal",children:[Object(w.jsxs)("h3",{children:["Are you sure you want to remove ",null===a||void 0===a?void 0:a.name,"?"]}),Object(w.jsxs)("div",{children:[Object(w.jsx)("button",{className:"main-btn modal-btn",onClick:function(){var e;n((e=null===a||void 0===a?void 0:a.id,function(){var t=Object(j.a)(d.a.mark((function t(n){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,O.a.delete((a=e,"".concat(m,"/Products/").concat(a)));case 2:n({type:v}),n(N());case 4:case"end":return t.stop()}var a}),t)})));return function(e){return t.apply(this,arguments)}}())),t(!1)},children:"yes"}),Object(w.jsx)("button",{className:"main-btn modal-btn",onClick:function(){n(E()),t(!1)},children:"no"})]})]})})},q=function(e){for(var t=e.allProducts,n=e.changePage,a=e.currentPage,c=e.productsNumberOnPage,r=[],i=1;i<=Math.ceil(t/c);i++)r.push(i);return Object(w.jsx)("div",{className:"pagination",children:Object(w.jsx)("div",{className:"pagination-container",children:r.map((function(e,t){return Object(w.jsx)("button",{className:"main-btn page-btn ".concat(a===e?"active":""),onClick:function(){return n(e)},children:e},t)}))})})},P=function(e){var t=e.id,n=e.name,a=e.quantity,c=e.date,r=e.description,i=e.email,l=e.setModalOpen,u=Object(o.b)(),d=Object(s.f)();return Object(w.jsx)(w.Fragment,{children:Object(w.jsxs)("tr",{children:[Object(w.jsx)("td",{children:t}),Object(w.jsx)("td",{children:n}),Object(w.jsx)("td",{children:a}),Object(w.jsx)("td",{children:c}),Object(w.jsx)("td",{children:r}),Object(w.jsx)("td",{children:i}),Object(w.jsx)("td",{className:"btn-cell",children:Object(w.jsx)("button",{className:"main-btn table-btn",onClick:function(){u(k(t)),d("/product?id=".concat(t))},children:"EDIT"})}),Object(w.jsx)("td",{className:"btn-cell",children:Object(w.jsx)("button",{className:"main-btn table-btn",onClick:function(){l(!0),u(k(t))},children:"DELETE"})})]})})},T=(n(65),function(){var e=Object(o.b)(),t=Object(s.f)(),n=Object(o.c)(S).all,c=Object(a.useState)(n),r=Object(l.a)(c,2),i=r[0],u=r[1],d=Object(a.useState)("id"),j=Object(l.a)(d,2),b=j[0],O=j[1],m=Object(a.useState)(1),h=Object(l.a)(m,2),p=h[0],f=h[1],x=Object(a.useState)(10),v=Object(l.a)(x,2),y=v[0],g=v[1],C=Object(a.useState)(!1),k=Object(l.a)(C,2),T=k[0],L=k[1],F=p*y,R=F-y;Object(a.useEffect)((function(){e(N())}),[e]),Object(a.useEffect)((function(){u(n)}),[n]);var I=Object(a.useCallback)((function(e){u(n.filter((function(t){return Object.values(t).some((function(t){return String(t).toLowerCase().includes(e.target.value.toLowerCase())}))})))}),[n]),_=Object(a.useCallback)((function(){var e,t;return 0===(null===i||void 0===i?void 0:i.length)?Object(w.jsx)("tr",{children:Object(w.jsx)("td",{colSpan:8,className:"no-products",children:"No products match your request"})}):null===i||void 0===i||null===(e=i.sort((function(e,t){return n=t,e[a=b]>n[a]?1:-1;var n,a})))||void 0===e||null===(t=e.slice(R,F))||void 0===t?void 0:t.map((function(e){var t=e.id,n=e.name,a=e.quantity,c=e.date,r=e.description,i=e.email;return Object(w.jsx)(P,{date:c,description:r,email:i,id:t,name:n,quantity:a,setModalOpen:L},t)}))}),[i,b,R,F]);return Object(w.jsxs)("div",{className:"page-container",children:[Object(w.jsxs)("div",{className:"top-container",children:[Object(w.jsxs)("div",{className:"search-component",children:[Object(w.jsx)("label",{htmlFor:"search",children:"Search:"}),Object(w.jsx)("input",{className:"searchbar",id:"search",type:"search",onChange:I})]}),Object(w.jsx)("button",{className:"main-btn add-btn",onClick:function(){t("/product"),e(E())},children:"Add a new product"})]}),Object(w.jsx)("div",{className:"table-container",children:Object(w.jsxs)("table",{children:[Object(w.jsx)("thead",{children:Object(w.jsx)("tr",{children:["Id","Name","Quantity","Date","Description","Email","",""].map((function(e,t){return Object(w.jsxs)("th",{className:"".concat(e.toLowerCase()===b?"select":""),id:e.toLowerCase(),onClick:function(e){return O(null===e||void 0===e?void 0:e.target.id)},children:[e,e.toLowerCase()===b&&" \u2193"]},t)}))})}),Object(w.jsx)("tbody",{children:_()})]})}),Object(w.jsx)("div",{className:"select-container",children:Object(w.jsxs)("select",{name:"products-per-page",id:"products-per-page",defaultValue:y,onChange:function(e){return g(e.target.value)},children:[[5,10,15,20].map((function(e,t){return Object(w.jsx)("option",{value:e,children:e},t)})),Object(w.jsx)("option",{value:n.length,onClick:function(){return g(n.length)},children:"all"})]})}),Object(w.jsx)(q,{allProducts:i.length,changePage:function(e){f(e)},currentPage:p,productsNumberOnPage:y}),T&&Object(w.jsx)(D,{modalOpen:T,setModalOpen:L})]})}),L=n(19),F=n(3),R=n(22),I=(n(66),function(){var e=Object(o.b)(),t=Object(s.f)(),n=Object(o.c)(S),c=n.alreadyExists,r=n.selected,i=Object(a.useState)({description:(null===r||void 0===r?void 0:r.description)||"",email:(null===r||void 0===r?void 0:r.email)||"",name:(null===r||void 0===r?void 0:r.name)||"",quantity:(null===r||void 0===r?void 0:r.quantity)||0,date:R.DateTime.fromISO(null===r||void 0===r?void 0:r.date).toISODate()||""}),u=Object(l.a)(i,2),b=u[0],v=u[1],y=Object(a.useState)({email:"",name:"",quantity:""}),g=Object(l.a)(y,2),C=g[0],k=g[1];Object(a.useEffect)((function(){var t;!r.id&&e((t=b.name,function(){var e=Object(j.a)(d.a.mark((function e(n){var a,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.a.get(p(JSON.stringify({name:t})));case 2:return e.next=4,e.sent.data.count;case 4:c=e.sent,n({type:x,alreadyExists:null===(a=c>0)||void 0===a||a});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))}),[e,b.name,r]);var D=Object(a.useCallback)((function(e){0===e.target.value.length&&k(Object(F.a)(Object(F.a)({},C),{},{name:"Name must not be empty"})),e.target.value.length>0&&e.target.value.length<5&&k(Object(F.a)(Object(F.a)({},C),{},{name:"Name must contain at least 5 characters"})),c&&k(Object(F.a)(Object(F.a)({},C),{},{name:"Name already exists"})),e.target.value.length>5&&!c&&k(Object(F.a)(Object(F.a)({},C),{},{name:""}))}),[c,C]),q=Object(a.useCallback)((function(){return"number"!==typeof b.quantity?k(Object(F.a)(Object(F.a)({},C),{},{quantity:"Quantity must be a number"})):k(Object(F.a)(Object(F.a)({},C),{},{quantity:""}))}),[b.quantity,C]),P=Object(a.useCallback)((function(e){return 0===e.target.value.length?k(Object(F.a)(Object(F.a)({},C),{},{email:"Email must not be empty"})):k(Object(F.a)(Object(F.a)({},C),{},{email:""}))}),[C]),T=function(e){"quantity"===e.target.name?v(Object(F.a)(Object(F.a)({},b),{},{quantity:Number(e.target.value)})):v(Object(F.a)(Object(F.a)({},b),{},Object(L.a)({},e.target.name,e.target.value)))};return Object(w.jsxs)("form",{onSubmit:function(n){var a,i;n.preventDefault(),c||""!==C.name||""!==C.email||""!==C.quantity||(r.id?e((a=r.id,i=b,function(){var e=Object(j.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.a.put((n=a,"".concat(m,"/Products/").concat(n)),i);case 2:t({type:"REPLACE_PRODUCT"}),t(N());case 4:case"end":return e.stop()}var n}),e)})));return function(t){return e.apply(this,arguments)}}())):e(function(e){return function(){var t=Object(j.a)(d.a.mark((function t(n){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,O.a.post(h(),e);case 2:n({type:f}),n(N());case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(Object(F.a)(Object(F.a)({},b),{},{date:R.DateTime.fromISO(b.date).toUTC().toString()}))),v({description:"",email:"",name:"",quantity:0}),e(E()),t("/"))},children:[Object(w.jsxs)("div",{className:"block",children:[Object(w.jsx)("label",{htmlFor:"name",children:"Name*:"}),Object(w.jsx)("input",{disabled:!!r.name,id:"name",name:"name",type:"text",onBlur:D,onChange:T,value:b.name}),Object(w.jsx)("span",{children:C.name})]}),Object(w.jsxs)("div",{className:"block",children:[Object(w.jsx)("label",{htmlFor:"quantity",children:"Quantity*:"}),Object(w.jsx)("input",{id:"quantity",name:"quantity",type:"number",onBlur:q,onChange:T,value:b.quantity}),Object(w.jsx)("span",{children:C.quantity})]}),Object(w.jsxs)("div",{className:"block",children:[Object(w.jsx)("label",{htmlFor:"date",children:"Date:"}),Object(w.jsx)("input",{id:"date",name:"date",type:"date",onChange:T,value:b.date}),Object(w.jsx)("span",{children:C.quantity})]}),Object(w.jsxs)("div",{className:"block",children:[Object(w.jsx)("label",{htmlFor:"email",children:"Email*:"}),Object(w.jsx)("input",{id:"email",name:"email",type:"email",onBlur:P,onChange:T,value:b.email}),Object(w.jsx)("span",{children:C.email})]}),Object(w.jsxs)("div",{className:"block",children:[Object(w.jsx)("label",{htmlFor:"description",children:"Description:"}),Object(w.jsx)("textarea",{id:"description",name:"description",onChange:T,value:b.description})]}),Object(w.jsxs)("div",{className:"btn-block",children:[Object(w.jsx)("button",{className:"main-btn",onClick:function(){t("/"),e(E())},children:"Back"}),Object(w.jsx)("button",{className:"main-btn",type:"submit",children:"Submit"})]})]})}),_=function(){return Object(w.jsx)(w.Fragment,{children:Object(w.jsxs)(s.c,{children:[Object(w.jsx)(s.a,{element:Object(w.jsx)(T,{}),path:"/"}),Object(w.jsx)(s.a,{element:Object(w.jsx)(I,{}),path:"/product"})]})})},M=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,68)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),a(e),c(e),r(e),i(e)}))},U=n(10),B=n(12),A=n(32),J=n(34),Q={all:[],alreadyExists:!1,selected:{}},G=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case y:return Object(F.a)(Object(F.a)({},e),{},{all:t.all});case f:return Object(F.a)({},e);case x:return Object(F.a)(Object(F.a)({},e),{},{alreadyExists:t.alreadyExists});case v:return Object(F.a)(Object(F.a)({},e),{},{all:Object(J.a)(e.all.filter((function(e){return e.id!==t.id})))});case g:return Object(F.a)(Object(F.a)({},e),{},{selected:e.all.filter((function(e){return e.id===t.id}))[0]});case C:return Object(F.a)(Object(F.a)({},e),{},{selected:{}});default:return e}},H=Object(B.combineReducers)({products:G}),K=n(33),V=Object(B.createStore)(H,Object(A.composeWithDevTools)(Object(B.applyMiddleware)(K.a)));i.a.render(Object(w.jsx)(c.a.StrictMode,{children:Object(w.jsx)(o.a,{store:V,children:Object(w.jsx)(U.a,{children:Object(w.jsx)(_,{})})})}),document.getElementById("root")),M()}},[[67,1,2]]]);
//# sourceMappingURL=main.9fe7a4be.chunk.js.map